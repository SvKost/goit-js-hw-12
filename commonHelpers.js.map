{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst API_KEY = '41875605-6b47be3c8e074a549a6d5f149';\nconst BASE_URL = 'https://pixabay.com/api';\n\nconst searchForm = document.querySelector('form');\nconst imagesContainer = document.querySelector('.gallery-container');\n\nsearchForm.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const query = form.querySelector('input').value.trim();\n\n  if (query) {\n    imagesContainer.innerHTML = '';\n    showLoader();\n\n    fetchImages(query)\n      .then(images => {\n        if (images.length === 0) {\n          iziToast.show({\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            messageColor: 'white',\n            position: 'topRight',\n            color: 'red',\n          });\n        } else {\n          showImagesGallery(images);\n        }\n      })\n      .catch(onFetchError)\n      .finally(() => {\n        hideLoader();\n        form.reset();\n      });\n  } else {\n    iziToast.show({\n      message: 'Please enter a search query!',\n      messageColor: 'white',\n      position: 'topRight',\n      color: 'red',\n    });\n\n    imagesContainer.innerHTML = '';\n  }\n}\n\nfunction fetchImages(query) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  return fetch(`${BASE_URL}/?${searchParams}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    return response.json().then(data => data.hits);\n  });\n}\n\nfunction showImagesGallery(images) {\n  imagesContainer.innerHTML = '';\n\n  const createQueryImagesMarkup = ({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  }) => `\n  \n    <li class=\"gallery\">\n      <a href=\"${largeImageURL}\">\n        <img class=\"image-preview\" src=\"${webformatURL}\" alt=\"${tags}\">\n      </a>\n      <div class=\"image-description\">\n      <p>Likes ${likes}</p>\n      <p>Views ${views}</p>\n      <p>Comments ${comments}</p>\n      <p>Downloads ${downloads}</p>\n      </div>\n    </li>\n  \n  `;\n\n  const galleryMarkup = images.map(createQueryImagesMarkup).join('');\n\n  imagesContainer.insertAdjacentHTML('beforeend', galleryMarkup);\n  lightbox.refresh();\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction onFetchError() {\n  iziToast.show({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    messageColor: 'white',\n    position: 'topRight',\n    color: 'red',\n  });\n}\n\nfunction showLoader() {\n  const loadingString = document.querySelector('.loader');\n  loadingString.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  const loadingString = document.querySelector('.loader');\n  loadingString.classList.add('hidden');\n}\n"],"names":["API_KEY","BASE_URL","searchForm","imagesContainer","handleSearch","event","form","query","showLoader","fetchImages","images","iziToast","showImagesGallery","onFetchError","hideLoader","searchParams","response","data","createQueryImagesMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryMarkup","lightbox","SimpleLightbox"],"mappings":"6vBAKA,MAAMA,EAAU,qCACVC,EAAW,0BAEXC,EAAa,SAAS,cAAc,MAAM,EAC1CC,EAAkB,SAAS,cAAc,oBAAoB,EAEnED,EAAW,iBAAiB,SAAUE,CAAY,EAElD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAOD,EAAM,cACbE,EAAQD,EAAK,cAAc,OAAO,EAAE,MAAM,OAE5CC,GACFJ,EAAgB,UAAY,GAC5BK,IAEAC,EAAYF,CAAK,EACd,KAAKG,GAAU,CACVA,EAAO,SAAW,EACpBC,EAAS,KAAK,CACZ,QACE,2EACF,aAAc,QACd,SAAU,WACV,MAAO,KACnB,CAAW,EAEDC,EAAkBF,CAAM,CAElC,CAAO,EACA,MAAMG,CAAY,EAClB,QAAQ,IAAM,CACbC,IACAR,EAAK,MAAK,CAClB,CAAO,IAEHK,EAAS,KAAK,CACZ,QAAS,+BACT,aAAc,QACd,SAAU,WACV,MAAO,KACb,CAAK,EAEDR,EAAgB,UAAY,GAEhC,CAEA,SAASM,EAAYF,EAAO,CAC1B,MAAMQ,EAAe,IAAI,gBAAgB,CACvC,IAAKf,EACL,EAAGO,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,OAAO,MAAM,GAAGN,MAAac,GAAc,EAAE,KAAKC,GAAY,CAC5D,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,OAAO,KAAKC,GAAQA,EAAK,IAAI,CACjD,CAAG,CACH,CAEA,SAASL,EAAkBF,EAAQ,CACjCP,EAAgB,UAAY,GAE5B,MAAMe,EAA0B,CAAC,CAC/B,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACJ,IAAQ;AAAA;AAAA;AAAA,iBAGSL;AAAA,0CACyBD,WAAsBE;AAAA;AAAA;AAAA,iBAG/CC;AAAA,iBACAC;AAAA,oBACGC;AAAA,qBACCC;AAAA;AAAA;AAAA;AAAA,IAMbC,EAAgBhB,EAAO,IAAIQ,CAAuB,EAAE,KAAK,EAAE,EAEjEf,EAAgB,mBAAmB,YAAauB,CAAa,EAC7DC,EAAS,QAAO,CAClB,CAEA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASf,GAAe,CACtBF,EAAS,KAAK,CACZ,QACE,2EACF,aAAc,QACd,SAAU,WACV,MAAO,KACX,CAAG,CACH,CAEA,SAASH,GAAa,CACE,SAAS,cAAc,SAAS,EACxC,UAAU,OAAO,QAAQ,CACzC,CAEA,SAASM,GAAa,CACE,SAAS,cAAc,SAAS,EACxC,UAAU,IAAI,QAAQ,CACtC"}