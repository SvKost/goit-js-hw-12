{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst API_KEY = '41875605-6b47be3c8e074a549a6d5f149';\nconst BASE_URL = 'https://pixabay.com/api';\n\nasync function fetchImages(query) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  const response = await fetch(`${BASE_URL}/?${searchParams}`);\n  const data = await response.json();\n  return data.hits;\n}\n\nconst refs = {\n  searchForm: document.querySelector('form'),\n  imagesContainer: document.querySelector('.gallery-container'),\n};\n\nconst ERROR_MESSAGES = {\n  noImages:\n    'Sorry, there are no images matching your search query. Please try again!',\n  enterQuery: 'Please enter a search query!',\n};\n\nrefs.searchForm.addEventListener('submit', handleSearch);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const query = form.elements.input.value.trim();\n\n  if (query) {\n    refs.imagesContainer.innerHTML = '';\n    showLoader();\n\n    try {\n      const data = await fetchImages(query);\n      if (data.length === 0) {\n        showIziToast(ERROR_MESSAGES.noImages);\n      } else {\n        showImagesGallery(data);\n      }\n    } catch {\n      onFetchError();\n    } finally {\n      hideLoader();\n      form.reset();\n    }\n  } else {\n    showIziToast(ERROR_MESSAGES.enterQuery);\n\n    refs.imagesContainer.innerHTML = '';\n  }\n}\n\nfunction showImagesGallery(images) {\n  refs.imagesContainer.innerHTML = '';\n\n  const createQueryImagesMarkup = ({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  }) => `\n  \n    <li class=\"gallery\">\n      <a href=\"${largeImageURL}\">\n        <img class=\"image-preview\" src=\"${webformatURL}\" alt=\"${tags}\">\n      </a>\n      <div class=\"image-description\">\n      <p>Likes ${likes}</p>\n      <p>Views ${views}</p>\n      <p>Comments ${comments}</p>\n      <p>Downloads ${downloads}</p>\n      </div>\n    </li>\n  \n  `;\n\n  const galleryMarkup = images.map(createQueryImagesMarkup).join('');\n\n  refs.imagesContainer.insertAdjacentHTML('beforeend', galleryMarkup);\n  lightbox.refresh();\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction onFetchError() {\n  showIziToast(ERROR_MESSAGES.noImages);\n}\n\nfunction showIziToast(\n  message,\n  messageColor = 'white',\n  position = 'topRight',\n  color = 'red'\n) {\n  iziToast.show({\n    message,\n    messageColor,\n    position,\n    color,\n  });\n}\n\nfunction showLoader() {\n  const loadingString = document.querySelector('.loader');\n  loadingString.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  const loadingString = document.querySelector('.loader');\n  loadingString.classList.add('hidden');\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","searchParams","refs","ERROR_MESSAGES","handleSearch","event","form","showLoader","data","showIziToast","showImagesGallery","onFetchError","hideLoader","images","createQueryImagesMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryMarkup","lightbox","SimpleLightbox","message","messageColor","position","color","iziToast"],"mappings":"6vBAKA,MAAMA,EAAU,qCACVC,EAAW,0BAEjB,eAAeC,EAAYC,EAAO,CAChC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKJ,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAID,OADa,MADI,MAAM,MAAM,GAAGF,MAAaG,GAAc,GAC/B,QAChB,IACd,CAEA,MAAMC,EAAO,CACX,WAAY,SAAS,cAAc,MAAM,EACzC,gBAAiB,SAAS,cAAc,oBAAoB,CAC9D,EAEMC,EAAiB,CACrB,SACE,2EACF,WAAY,8BACd,EAEAD,EAAK,WAAW,iBAAiB,SAAUE,CAAY,EAEvD,eAAeA,EAAaC,EAAO,CACjCA,EAAM,eAAc,EAEpB,MAAMC,EAAOD,EAAM,cACbL,EAAQM,EAAK,SAAS,MAAM,MAAM,OAExC,GAAIN,EAAO,CACTE,EAAK,gBAAgB,UAAY,GACjCK,IAEA,GAAI,CACF,MAAMC,EAAO,MAAMT,EAAYC,CAAK,EAChCQ,EAAK,SAAW,EAClBC,EAAaN,EAAe,QAAQ,EAEpCO,EAAkBF,CAAI,CAE9B,MAAM,CACAG,GACN,QAAc,CACRC,IACAN,EAAK,MAAK,CACX,CACL,MACIG,EAAaN,EAAe,UAAU,EAEtCD,EAAK,gBAAgB,UAAY,EAErC,CAEA,SAASQ,EAAkBG,EAAQ,CACjCX,EAAK,gBAAgB,UAAY,GAEjC,MAAMY,EAA0B,CAAC,CAC/B,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACJ,IAAQ;AAAA;AAAA;AAAA,iBAGSL;AAAA,0CACyBD,WAAsBE;AAAA;AAAA;AAAA,iBAG/CC;AAAA,iBACAC;AAAA,oBACGC;AAAA,qBACCC;AAAA;AAAA;AAAA;AAAA,IAMbC,EAAgBT,EAAO,IAAIC,CAAuB,EAAE,KAAK,EAAE,EAEjEZ,EAAK,gBAAgB,mBAAmB,YAAaoB,CAAa,EAClEC,EAAS,QAAO,CAClB,CAEA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASb,GAAe,CACtBF,EAAaN,EAAe,QAAQ,CACtC,CAEA,SAASM,EACPgB,EACAC,EAAe,QACfC,EAAW,WACXC,EAAQ,MACR,CACAC,EAAS,KAAK,CACZ,QAAAJ,EACA,aAAAC,EACA,SAAAC,EACA,MAAAC,CACJ,CAAG,CACH,CAEA,SAASrB,GAAa,CACE,SAAS,cAAc,SAAS,EACxC,UAAU,OAAO,QAAQ,CACzC,CAEA,SAASK,GAAa,CACE,SAAS,cAAc,SAAS,EACxC,UAAU,IAAI,QAAQ,CACtC"}